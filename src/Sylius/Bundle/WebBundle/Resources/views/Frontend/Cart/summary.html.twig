{% extends 'SyliusWebBundle:Frontend:layout.html.twig' %}

{% import 'SyliusWebBundle:Frontend/Macros:alerts.html.twig' as alerts %}

{% form_theme form _self %}

{% block javascripts %}
{{ parent() }}
{% javascripts output='assets/compiled/frontend_cart_summary.js'
    'bundles/syliusweb/js/form-collection.js'
%}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock %}

{% block main %}
<div class="main">
      <div class="container">
        <!-- BEGIN SIDEBAR & CONTENT -->
        <div class="row margin-bottom-40">
          <!-- BEGIN CONTENT -->
          <div class="col-md-12 col-sm-12">
            <h1>{{ 'sylius.cart.summary_header'|trans|raw }}</h1>
            <div class="shopping-cart-page">
              <div class="shopping-cart-data clearfix">
                <div class="table-wrapper-responsive">
                    {% if not cart.empty %}
                    {{ form_errors(form) }}
                    <form action="{{ path('sylius_cart_save') }}" method="post" novalidate>
                <table summary="Shopping cart">
                  <tr>
                    <th class="shopping-cart-image">Image</th>
                    <th class="shopping-cart-description">{{ 'sylius.cart.summary.product'|trans }}</th>
                    <th class="shopping-cart-quantity">{{ 'sylius.cart.summary.quantity'|trans }}</th>
                    <th class="shopping-cart-price">{{ 'sylius.cart.summary.unit_price'|trans }}</th>
                    <th class="shopping-cart-total" colspan="2">{{ 'sylius.cart.summary.total'|trans }}</th>
                  </tr>
                  {% for item in cart.items %}
                        {% include 'SyliusWebBundle:Frontend/Cart:_item.html.twig' %}
                  {% endfor %}
                  
                  
                </table>

                </div>

                <div class="shopping-total">
                  <ul>
                    {% if cart.promotionTotal %}
                    <li>
                        <em>{{ 'sylius.order.promotion_total'|trans }}</em>
                        <strong class="price">{{ cart.promotionTotal|sylius_price }}</strong>
                    </li>
                    {% endif %}
                    <li>
                      <em>{{ 'sylius.order.tax_total'|trans }}</em>
                      <strong class="price">{{ cart.taxTotal|sylius_price }}</strong>
                    </li>
                    <li>
                      <em>{{ 'sylius.order.shipping_total'|trans }}</em>
                      <strong class="price">{{ cart.shippingTotal|sylius_price }}</strong>
                    </li>
                    <li class="shopping-total-price">
                      <em>{{ 'sylius.cart.summary.grand_total'|trans }}</em>
                      <strong class="price">{{ cart.total|sylius_price }}</strong>
                    </li>
                  </ul>
                </div>
              </div>
              <div id="sylius-cart-coupons" class="well well-sm" data-prototype="{{ form_row(form.promotionCoupons.vars.prototype)|e }}">
                <div id="sylius-cart-coupons-collection">
                    {{ form_row(form.promotionCoupons, {'label_attr': {'class': 'col-lg-12'}}) }}
                </div>
                <br>
                <a href="#" class="btn btn-success col-lg-5" data-collection-button="add" data-prototype="sylius-cart-coupons" data-collection="sylius-cart-coupons-collection">
                    {{ 'sylius.cart.summary.add_coupon'|trans }}
                </a>
            </div>
            {{ form_rest(form) }}
            <div class="well">
                <button type="submit" class="btn btn-primary btn-lg"><i class="icon-save"></i> {{ 'sylius.cart.summary.save'|trans }}</button>
                <div class="pull-right">
                <a href="{{ path('sylius_checkout_start') }}" class="btn btn-success btn-lg"><i class="icon-shopping-cart"></i> {{ 'sylius.cart.summary.checkout'|trans }}</a>
                <a href="{{ path('sylius_cart_clear') }}" class="btn btn-danger btn-lg"><i class="icon-remove"></i> {{ 'sylius.cart.summary.clear'|trans }}</a>
                </div>
            </div>
            </form>
            {% else %}
                {{ alerts.info('sylius.cart.empty'|trans) }}
            {% endif %}
              
            </div>
          </div>
          <!-- END CONTENT -->
        </div>






{% endblock %}

{% block sylius_cart_item_row %}
{{ parent() }}
{% block form_message %}{% endblock %}
{% endblock %}
